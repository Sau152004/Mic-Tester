<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="icon" href="/image/favicon.ico" type="image/x-icon"/>
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/image/apple-touch-icon.png"/>

    <!-- Android Chrome -->
    <link rel="icon" type="image/png" sizes="192x192" href="/image/android-chrome-192x192.png"/>
    <link rel="icon" type="image/png" sizes="512x512" href="/image/android-chrome-512x512.png"/>

    <!-- Standard Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/image/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/image/favicon-16x16.png"/>

    <!-- Fallback .ico -->
    <link rel="icon" href="/image/favicon.ico" type="image/x-icon"/>

    <!-- Optional Manifest -->
    <link rel="manifest" href="/image/site.webmanifest"/>

    <title>{{ title }}</title>
    <meta name="description" content="{{ description }}"/>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "ui-sans-serif", "system-ui"]
            },
            fontSize: {
              xs: [
                "0.75rem", {
                  lineHeight: "1rem"
                }
              ],
              sm: [
                "0.875rem", {
                  lineHeight: "1.25rem"
                }
              ],
              base: [
                "1rem", {
                  lineHeight: "1.5rem"
                }
              ],
              lg: [
                "1.125rem", {
                  lineHeight: "1.75rem"
                }
              ],
              xl: [
                "1.25rem", {
                  lineHeight: "1.75rem"
                }
              ],
              "2xl": [
                "1.5rem", {
                  lineHeight: "2rem"
                }
              ],
              "3xl": [
                "1.875rem", {
                  lineHeight: "2.25rem"
                }
              ],
              "4xl": [
                "2.25rem", {
                  lineHeight: "2.5rem"
                }
              ]
            },
            screens: {
              xs: "475px"
            }
          }
        }
      };
    </script>

    <!-- jsPDF for certificate generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
/>

    <!-- Custom styles -->
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .glass-effect {
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.9);
      }
      .mic-animation {
        animation: pulse 2s infinite;
      }
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }
      .visualizer-bar {
        transition: height 0.1s ease;
        background: linear-gradient(to top, #3b82f6, #60a5fa);
      }

      /* Responsive improvements */
      @media (max-width: 640px) {
        .mic-animation {
          animation: none;
          /* Reduce animations on mobile for performance */
        }
      }

      /* FAQ specific styles */
      #faqContainer button:hover {
        background-color: #f9fafb;
      }

      #faqContainer button:focus {
        background-color: #f3f4f6;
      }

      /* Smooth transitions for FAQ */
      #faqContainer svg {
        transition: transform 0.2s ease-in-out;
      }

      /* Improve touch targets on mobile */
      @media (max-width: 768px) {
        #faqContainer button {
          min-height: 60px;
        }
      }

      /* Microphone info table styles */
      .mic-info-table {
        animation: fadeIn 0.3s ease-in-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body class="min-h-screen bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
          <a href="/"><div class="flex items-center">
            <div
              class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mr-3"
            >
              <svg
                class="w-5 h-5 text-white"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </div>
            <h1 class="text-xl font-semibold text-gray-900">Microphone Test</h1>
          </div>
          </a>
          <nav class="hidden sm:flex space-x-8">
            

            <a href="/" class="flex items-center text-gray-500 hover:text-gray-900 transition-colors">
              <!-- Heroicon: Home -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9.75L12 3l9 6.75M4.5 10.5V21h15v-10.5"/>
              </svg>
  Home
</a>

          </nav>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <!-- Hero Section -->
      <div class="text-center mb-8 sm:mb-12">
        <h2
          class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 mb-4"
        >
          Test Your Microphone
        </h2>
        <p
          class="text-base sm:text-lg lg:text-xl text-gray-600 max-w-2xl mx-auto px-4"
        >
          Check if your microphone is working properly with our real-time audio
          visualization and get detailed technical specifications. Your audio is
          never recorded or sent to any server.
        </p>
      </div>

      <!-- Main Test Card -->
      <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
        <!-- Privacy Notice -->
        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-8">
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-green-600 mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
                clip-rule="evenodd"
              ></path>
            </svg>
            <span class="text-green-800 font-medium"
              >Your audio is never recorded or sent to any server.</span
            >
          </div>
        </div>

        <!-- Device Selector -->
        <div class="mb-6" id="deviceSelector" style="display: none">
          <label
            for="micSelect"
            class="block text-sm font-medium text-gray-700 mb-2"
          >
            Select Microphone Device:
          </label>
          <select
            id="micSelect"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          >
            <option value="">Loading devices...</option>
          </select>
        </div>

        <!-- Test Controls -->
        <div class="text-center mb-8">
          <button
            id="startTest"
            class="bg-blue-600 hover:bg-blue-700 text-white font-medium px-8 py-4 rounded-lg text-lg transition-colors shadow-lg hover:shadow-xl mic-animation"
          >
            <svg
              class="w-6 h-6 inline-block mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z"
                clip-rule="evenodd"
              ></path>
            </svg>
            Start Microphone Test
          </button>

          <button
            id="stopTest"
            class="bg-red-600 hover:bg-red-700 text-white font-medium px-8 py-4 rounded-lg text-lg transition-colors shadow-lg hidden"
          >
            <svg
              class="w-6 h-6 inline-block mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z"
                clip-rule="evenodd"
              ></path>
            </svg>
            Stop Test
          </button>
        </div>

        <!-- Status Display -->
        <div id="statusDisplay" class="text-center mb-6">
          <p class="text-gray-600">Click "Start Microphone Test" to begin</p>
        </div>

        <!-- Volume Meter -->
        <div id="volumeMeter" class="hidden">
          <div class="mb-4">
            <div class="flex justify-between text-sm text-gray-600 mb-2">
              <span>Volume Level</span>
              <span id="volumeValue">0%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
              <div
                id="volumeBar"
                class="h-full bg-gradient-to-r from-green-400 via-yellow-400 to-red-500 transition-all duration-100"
                style="width: 0%"
              ></div>
            </div>
          </div>
        </div>

        <!-- Recording Player Section -->
        <div id="recordingPlayer" class="hidden mt-8">
          <div class="bg-green-50 border border-green-200 rounded-lg p-6">
            <div class="flex items-center mb-4">
              <svg
                class="w-6 h-6 text-green-600 mr-2"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              <h3 class="text-lg font-semibold text-green-800">
                Testing completed successfully!
              </h3>
            </div>

            <p class="text-green-700 mb-6">
              Your microphone works properly and all technical specifications
              have been captured. You can listen to your recorded voice below
              and download a detailed certificate with microphone information.
            </p>

            <!-- Test Duration Display -->
            <div class="bg-white rounded-lg p-4 mb-6">
              <div class="flex items-center justify-between mb-3">
                <span class="text-gray-700 font-medium">Test Duration</span>
                <span id="recordingDuration" class="text-gray-500 text-sm"
                  >0:00</span
                >
              </div>

              <!-- Audio Player -->
              <div class="mt-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  ðŸŽµ Your Recorded Voice:
                </label>
                <audio
                  id="recordedAudio"
                  controls
                  class="w-full"
                  controlsList="nodownload"
                >
                  <source type="audio/webm"/>
                  <source type="audio/mp4"/>
                  <source type="audio/wav"/>
                  Your browser does not support the audio element.
                </audio>
                <p class="text-xs text-gray-500 mt-2">
                  Note: This recording was made locally and is not stored on any
                  server.
                </p>
              </div>
            </div>

            <!-- Microphone Information will be inserted here by JavaScript -->

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-3">
              <button
                onclick="microphoneTestInstance.startNewTest()"
                class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-lg transition-colors"
              >
                <svg
                  class="w-4 h-4 inline-block mr-2"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
                Test Again
              </button>

              <button
                onclick="generateCertificate()"
                class="flex-1 bg-green-600 hover:bg-green-700 text-white font-medium px-4 py-2 rounded-lg transition-colors"
              >
                <svg
                  class="w-4 h-4 inline-block mr-2"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                  ></path>
                </svg>
                Download Certificate
              </button>

              <a
                id="downloadRecording"
                href="#"
                download
                class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium px-4 py-2 rounded-lg transition-colors text-center inline-flex items-center justify-center"
              >
                <svg
                  class="w-4 h-4 inline-block mr-2"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
                Download Recording
              </a>
            </div>
          </div>
        </div>

        <!-- Audio Visualizer -->
        <div id="visualizer" class="hidden">
          <h3 class="text-lg font-medium text-gray-900 mb-4 text-center">
            Audio Visualization
          </h3>
          <div
            class="flex items-end justify-center space-x-1 h-32 bg-gray-50 rounded-lg p-4"
          >
            <!-- Visualizer bars will be generated by JavaScript -->
          </div>
        </div>

        <!-- Recording Player Section -->
        <div id="recordingPlayer" class="hidden mt-8">
          <div class="bg-green-50 border border-green-200 rounded-lg p-6">
            <div class="flex items-center mb-4">
              <svg
                class="w-6 h-6 text-green-600 mr-2"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              <h3 class="text-lg font-semibold text-green-800">
                Testing completed successfully!
              </h3>
            </div>

            <p class="text-green-700 mb-4">
              Your microphone works properly and all technical specifications
              have been captured. You can download a detailed certificate with
              microphone information below.
            </p>

            <!-- Test Duration Display -->
            <div class="bg-white rounded-lg p-4 mb-4">
              <div class="flex items-center justify-between">
                <span class="text-gray-700 font-medium">Test Duration</span>
                <span id="recordingDuration" class="text-gray-500 text-sm"
                  >0:00</span
                >
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-3">
              <button
                onclick="microphoneTestInstance.startNewTest()"
                class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-lg transition-colors"
              >
                <svg
                  class="w-4 h-4 inline-block mr-2"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
                Test Again
              </button>

              <button
                onclick="generateCertificate()"
                class="flex-1 bg-green-600 hover:bg-green-700 text-white font-medium px-4 py-2 rounded-lg transition-colors"
              >
                <svg
                  class="w-4 h-4 inline-block mr-2"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                  ></path>
                </svg>
                Download Certificate
              </button>
            </div>
          </div>
        </div>

        <!-- Error Display -->
        <div
          id="errorDisplay"
          class="hidden bg-red-50 border border-red-200 rounded-lg p-4"
        >
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-red-600 mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                clip-rule="evenodd"
              ></path>
            </svg>
            <span id="errorMessage" class="text-red-800"></span>
          </div>
        </div>
      </div>

      <!-- FAQ Section -->
      <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 mb-8">
        <h3 class="text-2xl font-bold text-gray-900 mb-6 text-center">
          Frequently Asked Questions
        </h3>

        <div class="space-y-4" id="faqContainer">
          <!-- FAQ Item 1 -->
          <div class="border border-gray-200 rounded-lg">
            <button
              class="w-full text-left p-4 sm:p-6 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"
              onclick="toggleFaq('faq1')"
              aria-expanded="false"
              aria-controls="faq1-content"
            >
              <div class="flex justify-between items-center">
                <h4 class="text-base sm:text-lg font-medium text-gray-900 pr-4">
                  How does this microphone test work?
                </h4>
                <svg
                  class="w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0"
                  id="faq1-icon"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </div>
            </button>
            <div id="faq1-content" class="hidden px-4 sm:px-6 pb-4 sm:pb-6">
              <p class="text-gray-600 text-sm sm:text-base">
                Our microphone test uses your browser's built-in Web Audio API
                to access your microphone and display real-time audio
                visualization. The test shows volume levels and frequency data
                to help you verify your microphone is working properly.
              </p>
            </div>
          </div>

          <!-- FAQ Item 2 -->
          <div class="border border-gray-200 rounded-lg">
            <button
              class="w-full text-left p-4 sm:p-6 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"
              onclick="toggleFaq('faq2')"
              aria-expanded="false"
              aria-controls="faq2-content"
            >
              <div class="flex justify-between items-center">
                <h4 class="text-base sm:text-lg font-medium text-gray-900 pr-4">
                  Is my audio being recorded or stored?
                </h4>
                <svg
                  class="w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0"
                  id="faq2-icon"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </div>
            </button>
            <div id="faq2-content" class="hidden px-4 sm:px-6 pb-4 sm:pb-6">
              <p class="text-gray-600 text-sm sm:text-base">
                No, absolutely not. Your audio is never recorded, stored, or
                transmitted to any server. All processing happens locally in
                your browser and the audio data is immediately discarded after
                visualization.
              </p>
            </div>
          </div>

          <!-- FAQ Item 3 -->
          <div class="border border-gray-200 rounded-lg">
            <button
              class="w-full text-left p-4 sm:p-6 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"
              onclick="toggleFaq('faq3')"
              aria-expanded="false"
              aria-controls="faq3-content"
            >
              <div class="flex justify-between items-center">
                <h4 class="text-base sm:text-lg font-medium text-gray-900 pr-4">
                  Why is my browser asking for microphone permission?
                </h4>
                <svg
                  class="w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0"
                  id="faq3-icon"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </div>
            </button>
            <div id="faq3-content" class="hidden px-4 sm:px-6 pb-4 sm:pb-6">
              <p class="text-gray-600 text-sm sm:text-base">
                Your browser requires explicit permission to access your
                microphone for security and privacy reasons. This permission is
                only used for testing your microphone and can be revoked at any
                time through your browser settings.
              </p>
            </div>
          </div>

          <!-- FAQ Item 4 -->
          <div class="border border-gray-200 rounded-lg">
            <button
              class="w-full text-left p-4 sm:p-6 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"
              onclick="toggleFaq('faq4')"
              aria-expanded="false"
              aria-controls="faq4-content"
            >
              <div class="flex justify-between items-center">
                <h4 class="text-base sm:text-lg font-medium text-gray-900 pr-4">
                  What should I do if my microphone isn't working?
                </h4>
                <svg
                  class="w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0"
                  id="faq4-icon"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </div>
            </button>
            <div id="faq4-content" class="hidden px-4 sm:px-6 pb-4 sm:pb-6">
              <div class="text-gray-600 text-sm sm:text-base space-y-2">
                <p>Try these troubleshooting steps:</p>
                <ul class="list-disc list-inside space-y-1 ml-4">
                  <li>Make sure your microphone is connected and enabled</li>
                  <li>Check browser permissions for microphone access</li>
                  <li>
                    Ensure no other applications are using your microphone
                  </li>
                  <li>Try refreshing the page if the test doesn't work</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- FAQ Item 5 -->
          <div class="border border-gray-200 rounded-lg">
            <button
              class="w-full text-left p-4 sm:p-6 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"
              onclick="toggleFaq('faq5')"
              aria-expanded="false"
              aria-controls="faq5-content"
            >
              <div class="flex justify-between items-center">
                <h4 class="text-base sm:text-lg font-medium text-gray-900 pr-4">
                  Which browsers support this microphone test?
                </h4>
                <svg
                  class="w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0"
                  id="faq5-icon"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </div>
            </button>
            <div id="faq5-content" class="hidden px-4 sm:px-6 pb-4 sm:pb-6">
              <div class="text-gray-600 text-sm sm:text-base">
                <p class="mb-2">
                  This microphone test works on all modern browsers including:
                </p>
                <ul class="list-disc list-inside space-y-1 ml-4">
                  <li>Chrome 47+</li>
                  <li>Firefox 36+</li>
                  <li>Safari 11+</li>
                  <li>Edge 79+</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- FAQ Item 6 -->
          <div class="border border-gray-200 rounded-lg">
            <button
              class="w-full text-left p-4 sm:p-6 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"
              onclick="toggleFaq('faq6')"
              aria-expanded="false"
              aria-controls="faq6-content"
            >
              <div class="flex justify-between items-center">
                <h4 class="text-base sm:text-lg font-medium text-gray-900 pr-4">
                  Can I test multiple microphones?
                </h4>
                <svg
                  class="w-5 h-5 text-gray-500 transform transition-transform duration-200 flex-shrink-0"
                  id="faq6-icon"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </div>
            </button>
            <div id="faq6-content" class="hidden px-4 sm:px-6 pb-4 sm:pb-6">
              <p class="text-gray-600 text-sm sm:text-base">
                Yes! If you have multiple microphones connected, a device
                selector dropdown will appear automatically. You can choose
                which microphone to test from the dropdown menu.
              </p>
            </div>
          </div>
        </div>
      </div>
    </main>

   

    <!-- Professional Footer -->
    <footer class="bg-white border-t border-gray-200 mt-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Main Footer Content -->
        <div class="py-8 grid grid-cols-1 md:grid-cols-3 gap-8">
          <!-- Brand Section -->
          <div>
            <a href="/">
              <div class="flex items-center mb-3">
                <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mr-3">
                  <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd"></path>
                  </svg>
                </div>
                <span class="text-lg font-semibold text-gray-900">Microphone Test</span>
              </div>
            </a>
            <p class="text-gray-600 text-sm leading-relaxed mb-4">
          Professional microphone testing tool that runs entirely in your browser. Privacy-focused with real-time visualization.
        </p>
            <div class="flex flex-wrap gap-2">
              <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
            ðŸ”’ Privacy First
          </span>
              <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
            ðŸŽ¯ No Installation
          </span>
            </div>
          </div>

          <!-- Quick Navigation -->
          <div>
            <h3 class="text-lg font-semibold mb-4 text-gray-900">Quick Links</h3>
            <ul class="space-y-2 text-gray-600">
              <li>
                <a href="#" class="hover:text-blue-600 transition-colors duration-200 text-sm">
              Home
            </a>
              </li>
              <li>
                <a href="faq" class="hover:text-blue-600 transition-colors duration-200 text-sm">
              FAQ
            </a>
              </li>
              <li>
                <a href="privacy" class="hover:text-blue-600 transition-colors duration-200 text-sm">
              Privacy Policy
            </a>
              </li>
              <li>
                <a href="about" class="hover:text-blue-600 transition-colors duration-200 text-sm">
              About
            </a>
              </li>
            </ul>
          </div>

          <!-- Developer Information -->
          <div>
            <h3 class="text-lg font-semibold mb-4 text-gray-900">Developer</h3>
            <div class="text-gray-600 mb-4">
              <p class="font-medium text-gray-900 mb-1">Saurabh Yadav</p>
              <p class="text-sm text-gray-600 mb-3">Full-Stack Developer</p>
            </div>

            <div class="space-y-3">
              <a
            href="https://github.com/Sau152004"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200"
          >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
                <span class="text-sm">GitHub</span>
              </a>

              <a
            href="https://www.linkedin.com/in/saurabh-yadav-44947625b/"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center space-x-2 text-gray-600 hover:text-blue-600 transition-colors duration-200"
          >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
                <span class="text-sm">LinkedIn</span>
              </a>
            </div>
          </div>
        </div>

        <!-- Bottom Footer Bar -->
        <div class="border-t border-gray-200 py-4">
          <div class="flex flex-col sm:flex-row justify-between items-center space-y-2 sm:space-y-0">
            <p class="text-gray-500 text-sm">
          Â© 2024 Microphone Test Tool. All rights reserved.
        </p>
            <div class="flex items-center space-x-2 text-sm text-gray-500">
              <div class="flex items-center space-x-1">
                <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                </svg>
                <span>100% Client-Side</span>
              </div>
              <span>â€¢</span>
              <span>No Data Collection</span>
            </div>
          </div>
        </div>
      </div>
    </footer>
   
    <!-- Scripts -->
    <script>
      // FAQ Toggle Functionality
      function toggleFaq(faqId) {
        const content = document.getElementById(faqId + "-content");
        const icon = document.getElementById(faqId + "-icon");
        const button = content
          .previousElementSibling
          .querySelector("button");

        if (content.classList.contains("hidden")) {
          content
            .classList
            .remove("hidden");
          icon.style.transform = "rotate(180deg)";
          button.setAttribute("aria-expanded", "true");
        } else {
          content
            .classList
            .add("hidden");
          icon.style.transform = "rotate(0deg)";
          button.setAttribute("aria-expanded", "false");
        }
      }

      // Complete Certificate Generation Function
      function generateCertificate() {
        const {jsPDF} = window.jspdf;

        if (!window.micTestResults) {
          alert("Please complete a microphone test first before generating a certificate.");
          return;
        }

        const results = window.micTestResults;
        const micInfo = results.microphoneInfo;
        const doc = new jsPDF("landscape", "mm", "a4");

        // Certificate dimensions
        const pageWidth = doc
          .internal
          .pageSize
          .getWidth();
        const pageHeight = doc
          .internal
          .pageSize
          .getHeight();
        const centerX = pageWidth / 2;

        // Background and border
        doc.setFillColor(245, 247, 250); // Light gray background
        doc.rect(0, 0, pageWidth, pageHeight, "F");

        // Main border
        doc.setDrawColor(59, 130, 246); // Blue border
        doc.setLineWidth(2);
        doc.rect(10, 10, pageWidth - 20, pageHeight - 20);

        // Inner decorative border
        doc.setDrawColor(156, 163, 175); // Gray border
        doc.setLineWidth(0.5);
        doc.rect(15, 15, pageWidth - 30, pageHeight - 30);

        // Header section
        doc.setTextColor(59, 130, 246);
        doc.setFontSize(24);
        doc.setFont("helvetica", "bold");
        doc.text("MICROPHONE TEST CERTIFICATE", centerX, 28, {align: "center"});

        // Subheader
        doc.setTextColor(75, 85, 99);
        doc.setFontSize(11);
        doc.setFont("helvetica", "normal");
        doc.text("Official Certificate of Microphone Functionality & Technical Specifications", centerX, 35, {align: "center"});

        // Decorative line
        doc.setDrawColor(59, 130, 246);
        doc.setLineWidth(1);
        doc.line(centerX - 80, 39, centerX + 80, 39);

        // Certificate body
        doc.setTextColor(31, 41, 55);
        doc.setFontSize(12);
        doc.setFont("helvetica", "normal");
        doc.text("This is to certify that the microphone has been successfully tested and", centerX, 50, {align: "center"});
        doc.text("verified to be working properly with the following specifications:", centerX, 56, {align: "center"});

        // Test Results Section
        const testBoxY = 62;
        const testBoxHeight = 25;
        doc.setFillColor(249, 250, 251);
        doc.setDrawColor(229, 231, 235);
        doc.rect(20, testBoxY, pageWidth - 40, testBoxHeight, "FD");

        // Test Results Header
        doc.setFontSize(11);
        doc.setFont("helvetica", "bold");
        doc.setTextColor(59, 130, 246);
        doc.text("TEST RESULTS", centerX, testBoxY + 7, {align: "center"});

        // Test details in columns
        doc.setFontSize(9);
        doc.setFont("helvetica", "bold");
        doc.setTextColor(75, 85, 99);

        const leftCol = 30;
        const rightCol = centerX + 10;
        let currentY = testBoxY + 14;

        // Left column
        doc.text("Test Date:", leftCol, currentY);
        doc.text("Test Duration:", leftCol, currentY + 5);
        doc.text("Recording Status:", leftCol, currentY + 10);

        // Right column values
        doc.setFont("helvetica", "normal");
        doc.setTextColor(31, 41, 55);
        doc.text(results.testDate.toLocaleString(), rightCol, currentY);
        doc.text((results.duration / 1000).toFixed(1) + " seconds", rightCol, currentY + 5);

        // Status with color
        doc.setTextColor(34, 197, 94); // Green for PASSED
        doc.setFont("helvetica", "bold");
        doc.text("PASSED âœ“ " + (
          results.hasRecording
          ? "(with audio recording)"
          : ""), rightCol, currentY + 10);

        // Microphone Specifications Section
        const specBoxY = 92;
        const specBoxHeight = 80;
        doc.setFillColor(249, 250, 251);
        doc.setDrawColor(229, 231, 235);
        doc.rect(20, specBoxY, pageWidth - 40, specBoxHeight, "FD");

        // Specifications Header
        doc.setFontSize(11);
        doc.setFont("helvetica", "bold");
        doc.setTextColor(59, 130, 246);
        doc.text("MICROPHONE SPECIFICATIONS", centerX, specBoxY + 7, {align: "center"});

        // Specifications in detailed format
        doc.setFontSize(8);
        doc.setFont("helvetica", "bold");
        doc.setTextColor(75, 85, 99);

        currentY = specBoxY + 15;
        const lineHeight = 4.5;

        // Left column labels and values
        const labelCol = leftCol;
        const valueCol = leftCol + 40;

        // Device Information
        doc.setFont("helvetica", "bold");
        doc.setTextColor(59, 130, 246);
        doc.text("DEVICE INFORMATION", labelCol, currentY);
        currentY += 6;

        doc.setFont("helvetica", "bold");
        doc.setTextColor(75, 85, 99);
        doc.text("Device Name:", labelCol, currentY);
        doc.setFont("helvetica", "normal");
        doc.setTextColor(31, 41, 55);
        doc.text(micInfo.deviceName, valueCol, currentY);
        currentY += lineHeight;

        doc.setFont("helvetica", "bold");
        doc.setTextColor(75, 85, 99);
        doc.text("Device ID:", labelCol, currentY);
        doc.setFont("helvetica", "normal");
        doc.setTextColor(31, 41, 55);
        doc.text(micInfo.deviceId.substring(0, 30) + "...", valueCol, currentY);
        currentY += lineHeight;

        // Audio Quality Settings
        currentY += 2;
        doc.setFont("helvetica", "bold");
        doc.setTextColor(59, 130, 246);
        doc.text("AUDIO QUALITY", labelCol, currentY);
        currentY += 6;

        doc.setFont("helvetica", "bold");
        doc.setTextColor(75, 85, 99);
        doc.text("Sample Rate:", labelCol, currentY);
        doc.setFont("helvetica", "normal");
        doc.setTextColor(31, 41, 55);
        doc.text(micInfo.sampleRate + " Hz", valueCol, currentY);
        currentY += lineHeight;

        doc.setFont("helvetica", "bold");
        doc.setTextColor(75, 85, 99);
        doc.text("Sample Size:", labelCol, currentY);
        doc.setFont("helvetica", "normal");
        doc.setTextColor(31, 41, 55);
        doc.text(micInfo.sampleSize + " bit", valueCol, currentY);
        currentY += lineHeight;

        doc.setFont("helvetica", "bold");
        doc.setTextColor(75, 85, 99);
        doc.text("Audio Channels:", labelCol, currentY);
        doc.setFont("helvetica", "normal");
        doc.setTextColor(31, 41, 55);
        doc.text(micInfo.channelCount + " (" + (
          micInfo.channelCount === 1
          ? "Mono"
          : "Stereo") + ")", valueCol, currentY);
        currentY += lineHeight;

        doc.setFont("helvetica", "bold");
        doc.setTextColor(75, 85, 99);
        doc.text("Estimated Latency:", labelCol, currentY);
        doc.setFont("helvetica", "normal");
        doc.setTextColor(31, 41, 55);
        doc.text(micInfo.latency + " ms", valueCol, currentY);

        // Right side - Enhancement Features
        const rightSideX = centerX + 60;
        let rightY = specBoxY + 15;

        doc.setFont("helvetica", "bold");
        doc.setTextColor(59, 130, 246);
        doc.setFontSize(8);
        doc.text("ENHANCEMENT FEATURES", rightSideX, rightY);
        rightY += 6;

        // Feature status with colors
        doc.setFont("helvetica", "bold");
        doc.setTextColor(75, 85, 99);
        doc.text("Echo Cancellation:", rightSideX, rightY);
        doc.setTextColor(
          micInfo.echoCancellation
          ? 34
          : 239,
        micInfo.echoCancellation
          ? 197
          : 68,
        micInfo.echoCancellation
          ? 94
          : 68);
        doc.text(
          micInfo.echoCancellation
          ? "True"
          : "False",
        rightSideX + 35,
        rightY);
        rightY += lineHeight;

        doc.setTextColor(75, 85, 99);
        doc.text("Noise Suppression:", rightSideX, rightY);
        doc.setTextColor(
          micInfo.noiseSuppression
          ? 34
          : 239,
        micInfo.noiseSuppression
          ? 197
          : 68,
        micInfo.noiseSuppression
          ? 94
          : 68);
        doc.text(
          micInfo.noiseSuppression
          ? "True"
          : "False",
        rightSideX + 35,
        rightY);
        rightY += lineHeight;

        doc.setTextColor(75, 85, 99);
        doc.text("Auto Gain Control:", rightSideX, rightY);
        doc.setTextColor(
          micInfo.autoGainControl
          ? 34
          : 239,
        micInfo.autoGainControl
          ? 197
          : 68,
        micInfo.autoGainControl
          ? 94
          : 68);
        doc.text(
          micInfo.autoGainControl
          ? "True"
          : "False",
        rightSideX + 35,
        rightY);
        rightY += 8;

        // Performance Rating
        doc.setFont("helvetica", "bold");
        doc.setTextColor(59, 130, 246);
        doc.text("PERFORMANCE RATING", rightSideX, rightY);
        rightY += 6;

        // Calculate performance score
        let score = 0;
        if (micInfo.sampleRate >= 44100) 
          score += 25;
        if (micInfo.sampleSize >= 16) 
          score += 25;
        if (micInfo.echoCancellation) 
          score += 15;
        if (micInfo.noiseSuppression) 
          score += 15;
        if (micInfo.autoGainControl) 
          score += 10;
        if (parseFloat(micInfo.latency) < 50 && parseFloat(micInfo.latency) > 0) 
          score += 10;
        
        const rating = score >= 90
          ? "Excellent"
          : score >= 70
            ? "Good"
            : score >= 50
              ? "Fair"
              : "Basic";
        const ratingColor = score >= 90
          ? [34, 197, 94]
          : score >= 70
            ? [59, 130, 246]
            : score >= 50
              ? [245, 158, 11]
              : [239, 68, 68];

        doc.setTextColor(...ratingColor);
        doc.setFontSize(10);
        doc.text(rating + " (" + score + "/100)", rightSideX, rightY);

        // Quality indicators
        rightY += 8;
        doc.setFont("helvetica", "normal");
        doc.setTextColor(75, 85, 99);
        doc.setFontSize(7);

        const qualityIndicators = [];
        if (micInfo.sampleRate >= 44100) 
          qualityIndicators.push("âœ“ High-quality audio");
        if (micInfo.sampleSize >= 16) 
          qualityIndicators.push("âœ“ Professional bit depth");
        if (micInfo.echoCancellation) 
          qualityIndicators.push("âœ“ Echo cancellation");
        if (micInfo.noiseSuppression) 
          qualityIndicators.push("âœ“ Noise reduction");
        if (parseFloat(micInfo.latency) < 50) 
          qualityIndicators.push("âœ“ Low latency");
        
        qualityIndicators.forEach((indicator, index) => {
          doc.text(indicator, rightSideX, rightY + index * 3);
        });

        // Certificate validation section
        const validationY = 180;
        doc.setDrawColor(229, 231, 235);
        doc.setLineWidth(0.5);
        doc.line(20, validationY, pageWidth - 20, validationY);

        // Certificate ID and timestamp
        const certificateId = "MIC-" + Date
          .now()
          .toString(36)
          .toUpperCase() + "-" + Math
          .random()
          .toString(36)
          .substring(2, 8)
          .toUpperCase();
        doc.setTextColor(107, 114, 128);
        doc.setFontSize(8);
        doc.setFont("helvetica", "normal");
        doc.text("Certificate ID: " + certificateId, centerX, validationY + 8, {align: "center"});
        doc.text("Generated: " + new Date().toLocaleString(), centerX, validationY + 13, {align: "center"});

        // Add decorative microphone icons
        doc.setFontSize(10);
        doc.setTextColor(59, 130, 246);
        doc.text("ðŸŽ¤", 25, 25);
        doc.text("ðŸŽ¤", pageWidth - 30, 25);
        doc.text("ðŸŽ¤", 25, pageHeight - 20);
        doc.text("ðŸŽ¤", pageWidth - 30, pageHeight - 20);

        // Add corner decorations
        doc.setDrawColor(59, 130, 246);
        doc.setLineWidth(1.5);

        // Top corners
        doc.line(20, 20, 30, 20);
        doc.line(20, 20, 20, 30);
        doc.line(pageWidth - 30, 20, pageWidth - 20, 20);
        doc.line(pageWidth - 20, 20, pageWidth - 20, 30);

        // Bottom corners
        doc.line(20, pageHeight - 30, 20, pageHeight - 20);
        doc.line(20, pageHeight - 20, 30, pageHeight - 20);
        doc.line(pageWidth - 20, pageHeight - 30, pageWidth - 20, pageHeight - 20);
        doc.line(pageWidth - 30, pageHeight - 20, pageWidth - 20, pageHeight - 20);

        // Save the PDF
        const fileName = `microphone-test-certificate-${certificateId}.pdf`;
        doc.save(fileName);

        // Show success message
        const originalText = event.target.innerHTML;
        event.target.innerHTML = `
        <svg class="w-4 h-4 inline-block mr-2" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        Certificate Downloaded!
    `;
        event.target.style.backgroundColor = "#10b981";

        setTimeout(() => {
          event.target.innerHTML = originalText;
          event.target.style.backgroundColor = "";
        }, 3000);
      }
    </script>
    <script src="/js/app.js"></script>
  </body>
</html>